var jsReady = false; var swfReady = false; $(document).ready(function () { var Category = $("#Category"); $(".item", Category).hover(function () { $(this).children(".left").addClass("left_on"); $(this).children(".left_child").addClass("left_child_on"); $(this).children(".leftN").addClass("leftN_on"); }, function () { $(this).children(".left").removeClass("left_on"); $(this).children(".left_child").removeClass("left_child_on"); $(this).children(".leftN").removeClass("leftN_on"); }); $(".left_child_middle", Category).hover(function () { $(this).addClass("left_child_middle_on") }, function () { $(this).removeClass("left_child_middle_on") }); $.each($(".goodsScoure3"), function (i, n) { $(".goodsitem:eq(0)", $(n)).addClass("active"); $(".goodsitem", $(n)).hover(function () { if (!$(this).hasClass("active")) { $(this).parents(".goodsScoure3").find(".active").removeClass("active"); $(this).addClass("active"); } }, function () { }); }); jsReady = true; $(".categories-li").hover(function () { $(this).addClass("categories-li-hover"); }, function () { $(this).removeClass("categories-li-hover"); }); $(".categories-li2").hover(function () { $(this).addClass("categories-li-hover"); }, function () { $(this).removeClass("categories-li-hover"); }); $(".prnm-01 .prnm01-tis li").each(function(i, n) { $(n).hover(function() { $(".prnm-01 .link-01").removeClass("link-01").addClass("link-02"); $(n).removeClass("link-02").addClass("link-01"); $(".prnm-01 .tabchc").hide(); $($(".prnm-01 .tabchc")[i]).show(); }, function () { }); }); $("#qasubmit").click(function () { if ($("#qakeyword").val() == "请输入问题关键词") { $("#qakeyword").focus().select(); return false; } $("#qaform").submit(); }); $(".remarktop .change").hover(function () { $(".remarktop .hotgoods-h").removeClass("hotgoods-h").addClass("hotgoods-line"); $(this).removeClass("hotgoods-line").addClass("hotgoods-h"); }); $(".selltop .change").hover(function () { $(".selltop .hotgoods-h").removeClass("hotgoods-h").addClass("hotgoods-line"); $(this).removeClass("hotgoods-line").addClass("hotgoods-h"); }); $(".bannergoodsdatasource .TGoodsList .goodsitem").each(function (i, n) { $(n).addClass("ngs"); return false; }); $(".newgoodsdatasource .TGoodsList .goodsitem").each(function (i, n) { $(n).addClass("ngs"); return false; }); $(".bannergoodsdatasource .TGoodsList .goodsitem").hover(function () { $(".bannergoodsdatasource .TGoodsList .ngs").removeClass("ngs"); $(this).addClass("ngs"); }); $(".newgoodsdatasource .TGoodsList .goodsitem").hover(function () { $(".newgoodsdatasource .TGoodsList .ngs").removeClass("ngs"); $(this).addClass("ngs"); }); $("li", $(".bt-all")).hover(function() { $(".bt-s").removeClass("bt-s"); $(this).addClass("bt-s"); }); $(".friendlink .content").hover(function () { $(".friendlink .content .right").addClass("show"); $(".friendlink .content .left").css("height", $(".friendlink .content .right").height()); }, function () { $(".friendlink .content .right").removeClass("show"); $(".friendlink .content .left").css("height", "25px"); }); if ($.isIE6) { DD_belatedPNG.fix('.pngpic'); } }); function isReady() { return jsReady; } function setSWFIsReady() { swfReady = true; } function changeproduct() { if (swfReady) { var obj = getSWF("timerswf"); $.ajax({ type: 'POST', dataType: "json", url: "/Default/GetRobbingProduct", cache: false, data: $.param({ typeid: 1 }), success: function(json) { if (json && json.Valid) { obj.updata(json.RobbingTime + 3); var oitem = $("#item1"); $(".pimg>a", oitem).attr("href",json.Hyperlink); $("img", $(".pimg>a", oitem)).attr("src", json.ImageUrl).attr("alt", json.GoodsName); } }, error: function(XMLHttpRequest, textStatus, errorThrown) { } }); } } function getSWF(movieName) { if (navigator.appName.indexOf("Microsoft") != -1) { return window[movieName]; } else { return document[movieName]; } } function RobbingProduct(objid) { var self = this; var element = $("#item" + objid); var digital = new DigitalTime(0, 1000); var head = $(".googs-p-top", element); var pimg = $(".googs-img", element); var pname = $(".a12-b", element); var gds=$(".googs-description span", element); var gds2=$(".googs-description2 span",element); var mprice = $(gds[0]); var pprice = $(gds2[0]); var Discount = $(gds2[1]); var goodis; var callback = function(json) { if (json && !isNaN(json.RobbingTime)) { goodsid = json.GoodsId; pname.html("<a class='a12-b' href='" + json.Hyperlink + "'target='_blank' title='" + json.GoodsName + "'>" + json.GoodsName + "</a>"); mprice.html(json.MarketPrice.getMoney()); pprice.html(json.Price.getMoney()); Discount.html((json.Price * 10 / json.MarketPrice).toFixed(1)); pimg.html("<a href='" + json.Hyperlink + "'target='_blank'><img border='0' src='" + json.GoodsImage + "' alt='" + json.GoodsName + "' title='" + json.GoodsName + "'/></a>"); digital.updata(json.RobbingTime + 2); } else { setTimeout(function() { element.updata(); }, 5 * 1000); } }; var stopHandle = function() { element.updata(); }; var changeHandle = function(evt) { head.html("剩余 <span class='font16r-b'>" + evt.h + "</span>小时 " +"<span class='font16r-b'>"+ formatnum(evt.m, 2) + "</span> 分 <span class='font16r-b'>" + formatnum(evt.s, 2) + "</span> 秒"); }; element.setajax({ type: "get", dataType: "json", cache: false, url: "/Default/GetRobbingProduct", data: $.param({ typeid: objid }), success: callback, loader: new loading({ parent: element }), error: function(XMLHttpRequest, textStatus, errorThrown) { if (XMLHttpRequest.responseText == "") location.reload(); } }); digital.addEventListener("stop", stopHandle); digital.addEventListener("change", changeHandle); element.updata(); } function SwitchElement(option) { var self=this; var currentIdx=1; var lc=$("#"+option.leftID); var rc=$("#"+option.rightID); var element; var maxSwitch; var showElement=new Array(); var hideElement=new Array(); var tagName=option.tagName; var tagGroup=option.tagGroup; var showCount=option.showCount; var callBack=option.callBack; var selector=tagName+"[_group='"+tagGroup+"']"; element=$(selector); function ReturnOption() { return { ShowCount:showCount, CurrentIndex:currentIdx, Length:element.length }; } function SwitchRight() { if(currentIdx==maxSwitch) return; showElement.length=0; hideElement.length=0; var startIx=showCount*(currentIdx-1); var endIx=showCount*currentIdx-1; for(var i=startIx;i<=endIx;i++) hideElement.push(element[i]); startIx=showCount*currentIdx; endIx=showCount*(currentIdx+1)-1; for(var i=startIx;i<=endIx;i++) { if(i==element.length) break; showElement.push(element[i]); } currentIdx++; ExecuteSwitch(); } function SwitchLeft() { if(currentIdx==1) return; showElement.length=0; hideElement.length=0; var startIx=showCount*(currentIdx-1); var endIx=showCount*currentIdx-1; for(var i=startIx;i<=endIx;i++) { if(i==element.length) break; hideElement.push(element[i]); } startIx=showCount*(currentIdx-2); endIx=showCount*(currentIdx-1)-1; for(var i=startIx;i<=endIx;i++) showElement.push(element[i]); currentIdx--; ExecuteSwitch(); } function ExecuteSwitch() { $(hideElement).hide(); $(showElement).fadeIn("normal"); ExecuteCallBack(); } function ExecuteCallBack() { if(callBack!=undefined && callBack!=null) callBack(ReturnOption()); } function Init() { var bal=element.length%showCount; if(bal==0) maxSwitch=element.length/option.showCount; else maxSwitch=parseInt(element.length/option.showCount)+1; element.hide(); $(element).each(function(i,n){ if(i==showCount) return false; $(n).show(); }); lc.click(function(){ SwitchLeft(); }); rc.click(function(){ SwitchRight(); }); ExecuteCallBack(); } Init(); } 
 function AdSwitch(options) { var self=this; var fes=$(options.focusElements), selectedCss=options.selectedCss, ses=$(options.showElements); var cix=0; var timer; var curElement=ses[cix]; var isStop=false; var delay=3000; $(ses[0]).show(); $(fes[0]).addClass(selectedCss); if(options.delay != undefined && options.delay != null) delay=options.delay; function ExeSwitch() { if(cix==fes.length) cix=0; fes.removeClass(selectedCss); $(fes[cix]).addClass(selectedCss); ses.hide(); $(ses[cix]).show(); } fes.each(function(i,n){ $(n).hover(function(){ isStop=true; cix=i; ExeSwitch(); },function(){ isStop=false; }); }); ExeSwitch(); self.Init = function Init() { $(ses[0]).show(); $(fes[0]).addClass(selectedCss); timer = setInterval(function () { if (isStop) return; cix++; ExeSwitch(); }, delay); }; self.Init(); } function FreeActivity(options) { if(options.End.length==0) { this.Start=function(){}; return; } var freeEndVal=options.End.val(); var endParts=freeEndVal.split(","); if(endParts.length!=6) { return; } var endDate=new Date(endParts[0],endParts[1]-1,endParts[2],endParts[3],endParts[4],endParts[5]); var freeTimer, freeDay=options.DD, freeHour=options.HH, freeMin=options.MM, freeSec=options.SS, endDateTime=endDate.getTime(); this.Start=function() { freeTimer = setInterval(function(){ var now=new Date(); var nowTime=now.getTime(); var diff=endDateTime-nowTime; var diffDate=Math.floor(diff/(1000*60*60*24)), diffHour=Math.floor(diff/(1000*60*60)%24), diffMin=Math.floor(diff/(1000*60)%60), diffSec=Math.floor(diff/(1000)%60); freeDay.html(diffDate); if(options.ShowMode=="D") { diffHour=diffHour.toString(); if(diffHour.length==1) { diffHour="0"+diffHour; } freeHour[0].html(diffHour.charAt(0)); freeHour[1].html(diffHour.charAt(1)); diffMin=diffMin.toString(); if(diffMin.length==1) { diffMin="0"+diffMin; } freeMin[0].html(diffMin.charAt(0)); freeMin[1].html(diffMin.charAt(1)); diffSec=diffSec.toString(); if(diffSec.length==1) { diffSec="0"+diffSec; } freeSec[0].html(diffSec.charAt(0)); freeSec[1].html(diffSec.charAt(1)); }else { freeHour.html(diffHour); freeMin.html(diffMin); freeSec.html(diffSec); } },1000); }; } function TryOn(){ var panel=$("#trypanel"); var pw=panel.innerWidth(); var lbtn=$(".l",panel); var rbtn=$(".r",panel); if($(".content a",panel).length<3)return; $(".content a",panel).css({display:"block",opacity:0,zIndex:1}); var cimg=$(".content a:first",panel).css({zIndex:10}); var rimg=$(".content a:eq(1)",panel); var hidimg=null; var limg=$(".content a:last",panel); limg.prependTo($(".content",panel)); var cobj={ left:57, opacity:1, width:126,height:124 }; var lobj={left:0,opacity:0.5,width:100,height:100}; var robj={left:140,opacity:0.5,width:100,height:100}; var hobj={opacity:0,left:70}; cimg.css(cobj); limg.css(lobj); rimg.css(robj); lbtn.click(function(){ if(lbtn.data("disabled")) return; lbtn.data("disabled",true); rbtn.data("disabled",true); hidimg=limg; hidimg.appendTo($(".content",panel)); limg=cimg.css({zIndex:1}); cimg=rimg.css({zIndex:10}); rimg=$(".content a:eq(2)",panel); hidimg.animate(hobj,{ duration: 500 }); rimg.animate(robj,{ duration: 500 }); cimg.animate(cobj,{ duration: 500 }); limg.animate(lobj,{ duration: 500 }); setTimeout(function(){lbtn.data("disabled",false);rbtn.data("disabled",false);},500); }); rbtn.click(function(){ if($(this).data("disabled")) return; lbtn.data("disabled",true); rbtn.data("disabled",true); hidimg=rimg; rimg=cimg.css({zIndex:1}); cimg=limg.css({zIndex:10}); limg=$(".content a:last",panel); limg.prependTo($(".content",panel)); hidimg.animate(hobj,{ duration: 500 }); rimg.animate(robj,{ duration: 500 }); cimg.animate(cobj,{ duration: 500 }); limg.animate(lobj,{ duration: 500 }); setTimeout(function(){lbtn.data("disabled",false);rbtn.data("disabled",false);},500); }); } function Cuxiao(uniqueID){ if($("#"+uniqueID).length==0) { return; } function ScrollPic(scrollContId,arrLeftId,arrRightId,dotListId) { var self=this; this.scrollContId=scrollContId; this.arrLeftId=arrLeftId; this.arrRightId=arrRightId; this.dotListId=dotListId; this.dotClassName="dotItem"; this.dotOnClassName="dotItemOn"; this.dotObjArr=[]; this.pageWidth=0; this.frameWidth=0; this.speed=10; this.space=10; this.pageIndex=0; this.autoPlay=true; this.autoPlayTime=5; var _autoTimeObj,_scrollTimeObj,_state="ready"; this.stripDiv=$("<DIV />"); this.listDiv01=$("<DIV />"); this.listDiv02=$("<DIV />"); if(!ScrollPic.childs) { ScrollPic.childs=[]; } this.ID=ScrollPic.childs.length; ScrollPic.childs.push(this); this.initialize=function() { if(!self.scrollContId) { throw new Error("必须指定scrollContId."); return; } self.scrollContDiv=$("#"+self.scrollContId); if(!self.scrollContDiv) { throw new Error("scrollContId不是正确的对象.(scrollContId = "+this.scrollContId+")"); return; } self.scrollContDiv.css({"width":self.frameWidth+"px","overflow":"hidden"}); self.listDiv01.html(self.scrollContDiv.html()); self.listDiv02.html(self.scrollContDiv.html()); self.scrollContDiv.html(""); self.scrollContDiv.append(self.stripDiv); self.stripDiv.append(self.listDiv01); self.stripDiv.append(self.listDiv02); self.stripDiv.css({"overflow":"hidden","zoom":"1","width":"32766px"}); self.listDiv01.css("float","left"); self.listDiv02.css("float","left"); self.scrollContDiv.hover(function(){ ScrollPic.childs[self.ID].stop(); },function(){ ScrollPic.childs[self.ID].play(); }); if(self.arrLeftId) { self.arrLeftObj=$("#"+self.arrLeftId); if(self.arrLeftObj) { $(self.arrLeftObj).mousedown(function(){ ScrollPic.childs[self.ID].rightMouseDown(); }).mouseup(function(){ ScrollPic.childs[self.ID].rightEnd(); }).mouseout(function(){ ScrollPic.childs[self.ID].rightEnd(); }); } } if(self.arrRightId) { self.arrRightObj=$("#"+self.arrRightId); if(self.arrRightObj) { $(self.arrRightObj).mousedown(function(){ ScrollPic.childs[self.ID].leftMouseDown(); }).mouseup(function(){ ScrollPic.childs[self.ID].leftEnd(); }).mouseout(function(){ ScrollPic.childs[self.ID].leftEnd(); }); } } if(self.dotListId) { self.dotListObj=$("#"+self.dotListId); if(self.dotListObj) { var pages=Math.round(self.listDiv01.attr("offsetWidth")/self.frameWidth+0.4), i, tempObj; for(i=0;i<pages;i++) { tempObj=$("<span />"); self.dotListObj.append(tempObj); self.dotObjArr.push(tempObj); if(i==self.pageIndex) { tempObj.attr("class",self.dotClassName); }else { tempObj.attr("class",self.dotOnClassName); } tempObj.click(function(){ ScrollPic.childs[self.ID].pageTo(i); }); } } } if(self.autoPlay) { self.play(); } }; this.leftMouseDown=function() { if(_state!="ready") { return; } _state="floating"; _scrollTimeObj=setInterval(function(){ ScrollPic.childs[self.ID].moveLeft(); },self.speed); }; this.rightMouseDown=function() { if(_state!="ready") { return; } _state="floating"; _scrollTimeObj=setInterval(function(){ ScrollPic.childs[self.ID].moveRight(); },self.speed); }; this.moveLeft=function() { if(self.scrollContDiv.scrollLeft()+self.space>=self.listDiv01.attr("scrollWidth")) { self.scrollContDiv.scrollLeft(self.scrollContDiv.scrollLeft()+self.space-self.listDiv01.attr("scrollWidth")); } else { self.scrollContDiv.scrollLeft(self.scrollContDiv.scrollLeft()+self.space); } this.accountPageIndex(); }; this.moveRight=function() { if(self.scrollContDiv.scrollLeft()-self.space<=0) { self.scrollContDiv.scrollLeft(self.listDiv01.attr("scrollWidth")+self.scrollContDiv.scrollLeft()-self.space); }else { self.scrollContDiv.scrollLeft(self.scrollContDiv.scrollLeft()-self.space); } self.accountPageIndex(); }; this.leftEnd=function() { if(_state!="floating"){return;} _state="stoping"; clearInterval(_scrollTimeObj); var fill=self.pageWidth-self.scrollContDiv.scrollLeft()%self.pageWidth; self.move(fill); }; this.rightEnd=function() { if(_state!="floating"){return;} _state="stoping"; clearInterval(_scrollTimeObj); var fill=-self.scrollContDiv.scrollLeft()%self.pageWidth; self.move(fill); }; this.move=function(num,quick) { var thisMove=num/5; if(!quick) { if(thisMove>self.space) { thisMove=self.space; } if(thisMove<-self.space) { thisMove=-self.space; } } if(Math.abs(thisMove)<1&&thisMove!=0) { thisMove=thisMove>=0?1:-1; }else { thisMove=Math.round(thisMove); } var temp=self.scrollContDiv.scrollLeft()+thisMove; if(thisMove>0) { if(self.scrollContDiv.scrollLeft()+thisMove>=self.listDiv01.attr("scrollWidth")) { self.scrollContDiv.scrollLeft(self.scrollContDiv.scrollLeft()+thisMove-self.listDiv01.attr("scrollWidth")); }else { self.scrollContDiv.scrollLeft(self.scrollContDiv.scrollLeft()+thisMove); } }else { if(self.scrollContDiv.scrollLeft()-thisMove<=0) { self.scrollContDiv.scrollLeft(self.listDiv01.attr("scrollWidth")+self.scrollContDiv.scrollLeft()-thisMove); }else { self.scrollContDiv.scrollLeft(self.scrollContDiv.scrollLeft()+thisMove); } } num-=thisMove; if(Math.abs(num)==0) { _state="ready"; if(self.autoPlay) { self.play(); } self.accountPageIndex(); return; }else { self.accountPageIndex(); setTimeout(function(){ ScrollPic.childs[self.ID].move(num,quick); },self.speed); } }; this.next=function() { if(_state!="ready"){return}; _state="stoping"; self.move(self.pageWidth,true); }; this.play=function() { if(!self.autoPlay){return}; clearInterval(_autoTimeObj); _autoTimeObj=setInterval(function(){ ScrollPic.childs[self.ID].next(); },self.autoPlayTime*1000); }; this.stop=function() { clearInterval(_autoTimeObj); }; this.pageTo=function(num) { if(_state!="ready") {return;} _state="stoping"; var fill=num*self.frameWidth-self.scrollContDiv.scrollLeft(); self.move(fill,true); }; this.accountPageIndex=function() { self.pageIndex=Math.round(self.scrollContDiv.scrollLeft()/self.frameWidth); if(self.pageIndex>Math.round(self.listDiv01.attr("offsetWidth")/self.frameWidth+0.4)-1){self.pageIndex=0}; var i; for(i=0;i<self.dotObjArr.length;i++) { if(i==self.pageIndex) { self.dotObjArr[i].attr("class",self.dotClassName); } else { self.dotObjArr[i].attr("class",self.dotOnClassName); } } }; } var Class = { create: function() { return function() { this.initialize.apply(this, arguments); } } }; Object.extend = function(destination, source) { for (var property in source) { destination[property] = source[property]; } return destination; }; var TransformView = Class.create(); TransformView.prototype = { initialize: function(container, slider, parameter, count, options) { if(parameter <= 0 || count <= 0) return; var oContainer = $("#"+container), oSlider = $("#"+slider), oThis = this; this.Index = 0; this._timer = null; this._slider = oSlider; this._parameter = parameter; this._count = count || 0; this._target = 0; this.SetOptions(options); this.Up = !!this.options.Up; this.Step = Math.abs(this.options.Step); this.Time = Math.abs(this.options.Time); this.Auto = !!this.options.Auto; this.Pause = Math.abs(this.options.Pause); this.onStart = this.options.onStart; this.onFinish = this.options.onFinish; oContainer.css("overflow","hidden"); oContainer.css("positon","relative"); oSlider.css("position","absolute") ; oSlider.css({"top":"0px","left":"0px"}); }, SetOptions: function(options) { this.options = { Up: true, Step: 5, Time: 10, Auto: true, Pause: 2000, onStart: function(){}, onFinish: function(){} }; Object.extend(this.options, options || {}); }, Start: function() { if(this.Index < 0){ this.Index = this._count - 1; } else if (this.Index >= this._count){ this.Index = 0; } this._target = -1 * this._parameter * this.Index; this.onStart(); this.Move(); }, Move: function() { clearTimeout(this._timer); var oThis = this, style = this.Up ? "top" : "left", iNow = parseInt(this._slider.css(style)) || 0, iStep = this.GetStep(this._target, iNow); if (iStep != 0) { this._slider.css(style,(iNow + iStep) + "px"); this._timer = setTimeout(function(){ oThis.Move(); }, this.Time); } else { this._slider.css(style,this._target + "px"); this.onFinish(); if (this.Auto) { this._timer = setTimeout(function(){ oThis.Index++; oThis.Start(); }, this.Pause); } } }, GetStep: function(iTarget, iNow) { var iStep = (iTarget - iNow) / this.Step; if (iStep == 0) return 0; if (Math.abs(iStep) < 1) return (iStep > 0 ? 1 : -1); return iStep; }, Stop: function(iTarget, iNow) { clearTimeout(this._timer); var tempCss=this.Up ? "top" : "left"; this._slider.css(tempCss,this._target + "px"); } }; $.fn.infiniteCarousel = function () { function repeat(str, num) { return new Array( num + 1 ).join( str ); } return this.each(function () { var $wrapper = $('> div', this).css('overflow', 'hidden'), $slider = $wrapper.find('> ul'), $items = $slider.find('> li'), $single = $items.filter(':first'), singleWidth = $single.outerWidth(), visible = Math.ceil($wrapper.innerWidth() / singleWidth), currentPage = 1, pages = Math.ceil($items.length / visible); if (($items.length % visible) != 0) { $slider.append(repeat('<li class="empty" />', visible - ($items.length % visible))); $items = $slider.find('> li'); } $items.filter(':first').before($items.slice(- visible).clone().addClass('cloned')); $items.filter(':last').after($items.slice(0, visible).clone().addClass('cloned')); $items = $slider.find('> li'); $wrapper.scrollLeft(singleWidth * visible); function gotoPage(page) { var dir = page < currentPage ? -1 : 1, n = Math.abs(currentPage - page), left = singleWidth * dir * visible * n; $wrapper.filter(':not(:animated)').animate({ scrollLeft : '+=' + left }, 500, function () { if (page == 0) { $wrapper.scrollLeft(singleWidth * visible * pages); page = pages; } else if (page > pages) { $wrapper.scrollLeft(singleWidth * visible); page = 1; } currentPage = page; }); return false; } $wrapper.after('<a class="arrow back">&lt;</a><a class="arrow forward">&gt;</a>'); $('a.back', this).click(function () { return gotoPage(currentPage - 1); }); $('a.forward', this).click(function () { return gotoPage(currentPage + 1); }); $(this).bind('goto', function (event, page) { gotoPage(page); }); }); }; (function () { $(".infiniteCarousel").infiniteCarousel(); function Each(list, fun){ for (var i = 0, len = list.length; i < len; i++) { fun(list[i], i); } }; var objs = $("#idNum").find("li"); var tv = new TransformView("idTransformView", "idSlider", 304, 2, { onStart : function(){ Each(objs, function(o, i){ o.className = tv.Index == i ? "on" : ""; }); } }); tv.Start(); Each(objs, function(o, i){ o.onmouseover = function(){ o.className = "on"; tv.Auto = false; tv.Index = i; tv.Start(); }; o.onmouseout = function(){ o.className = ""; tv.Auto = true; tv.Start(); }; }); var objs2 = $("#idNum2").find("li"); var tv2 = new TransformView("idTransformView2", "idSlider2", 408, 3, { onStart: function(){ Each(objs2, function(o, i){ o.className = tv2.Index == i ? "on" : ""; }) }, Up: false }); tv2.Start(); Each(objs2, function(o, i){ o.onmouseover = function(){ o.className = "on"; tv2.Auto = false; tv2.Index = i; tv2.Start(); }; o.onmouseout = function(){ o.className = ""; tv2.Auto = true; tv2.Start(); }; }); $("#idStop").onclick = function(){ tv2.Auto = false; tv2.Stop(); }; $("#idStart").onclick = function(){ tv2.Auto = true; tv2.Start(); }; $("#idNext").onclick = function(){ tv2.Index++; tv2.Start(); }; $("#idPre").onclick = function(){ tv2.Index--;tv2.Start(); }; $("#idFast").onclick = function(){ if(--tv2.Step <= 0){tv2.Step = 1;} }; $("#idSlow").onclick = function(){ if(++tv2.Step >= 10){tv2.Step = 10;} }; $("#idReduce").onclick = function(){ tv2.Pause-=1000; if(tv2.Pause <= 0){tv2.Pause = 0;} }; $("#idAdd").onclick = function(){ tv2.Pause+=1000; if(tv2.Pause >= 5000){tv2.Pause = 5000;} }; $("#idReset").onclick = function(){ tv2.Step = Math.abs(tv2.options.Step); tv2.Time = Math.abs(tv2.options.Time); tv2.Auto = !!tv2.options.Auto; tv2.Pause = Math.abs(tv2.options.Pause); }; new FreeActivity({ End:$("#endtime"), DD:$("#day_txt"), HH:[$("#hour_txt_1"),$("#hour_txt_2")], MM:[$("#minute_txt_1"),$("#minute_txt_2")], SS:[$("#second_txt_1"),$("#second_txt_2")], ShowMode:"D" }).Start(); var scrollPic_02 = new ScrollPic(); scrollPic_02.scrollContId = "ISL_Cont_1"; scrollPic_02.arrLeftId = "LeftArr"; scrollPic_02.arrRightId = "RightArr"; scrollPic_02.frameWidth = 450; scrollPic_02.pageWidth = 450; scrollPic_02.speed = 10; scrollPic_02.space = 10; scrollPic_02.autoPlay = false; scrollPic_02.autoPlayTime = 3; scrollPic_02.initialize(); })(); } function ExchangeVoucherActivity(domID) { var dom=$("#"+domID); if(dom.length==0) { return; } new FreeActivity({ End:$("#evactivityenddate"), DD:$("#evactivityday"), HH:$("#evactivityhour"), MM:$("#evactivitymin"), SS:$("#evactivitysec") }).Start(); dom.setajax({ loader:new loading({parent:$(document.body)}), url:"/account/exchangescore", type:"post", success:function(data){ if(data.Valid) { tip({ title:"提示", msg:"恭喜您获得一张优惠券！", type:"success", autohide:4, buttons:[{ text:"继续兑换", handle:function(){ this.hide(); } }, { text:"我的优惠券", handle:function(){ window.open("/account/myvoucher","_blank"); } } ] }); }else { tip({ title:"错误", type:"error", msg:data.Error, autohide:4, buttons:[{ text:"确定", handle:function(){ this.hide(); } }] }); } }, error:function(data){ alert(data.responseText); } }); dom.find(".btn_ex").click(function(){ var This=$(this); if(!hasTicket()) { loginobj.show(); loginobj.addEventListener("login",function(){ This.click(); }); return; } tip({ title:"", msg:"兑换本优惠券需要 "+This.attr("_score")+" 积分", type:"alert", autohide:0, buttons:[{ text:"确定兑换", handle:function(){ dom.updata({data:"et=2&rid="+This.attr("_rid")}); } }, { text:"取消兑换", handle:function(){ this.hide(); } }] }); }); } $(function() { $(".prnm03-01 li").hover(function() { $(".p0301-h").removeClass("p0301-h"); $(this).addClass("p0301-h"); },function(){ }); $(".prnm03-02 li").hover(function() { $(".p0302-h").removeClass("p0302-h"); $(this).addClass("p0302-h"); },function(){ }); $.each($(".listxg"),function(i,n){ var element=$(n); $("ul>li:eq(0)",element).addClass("active"); $("ul>li",element).mouseover(function(){ $("ul>li",element).removeClass("active"); $(this).addClass("active"); }) }); $.each($(".numlist"),function(i,n){ var element=$(n); $.each($("ul>li",element),function(j,m){ $(m).prepend($("<s/>").addClass("num").addClass("num"+j)); }) }); $(".frame .top .change").hover(function(){ $(".frame .top .hotgoods-h").removeClass("hotgoods-h").addClass("hotgoods-line"); $(this).removeClass("hotgoods-line").addClass("hotgoods-h"); }); new AdSwitch({ focusElements:".renqi .top .center .img-num span", showElements:".renqi .top .center img", delay:3000, selectedCss:"selected" }); new AdSwitch({ focusElements: ".kj-main .banner span", showElements: ".kj-main .banner a", delay: 3000, selectedCss: "selected" }); new AdSwitch({ focusElements: ".bt-all li", showElements: ".in-main .banner a", delay: 3000, selectedCss: "bt-s" }); $(".main .category").find("td").children().hover(function(){ var self=$(this); self.addClass(self.attr("_class")+"-hover item-hover"); },function(){ var self=$(this); self.attr("class",self.attr("_class")); }); $(".switch-c").jdMarquee( {deriction:"left",width:694,height:112,step:1,speed:4,delay:10,control:true,auto:true,_front:".switch-r",_back:".switch-l"} ); $(".tabchc .TGoodsList .title").hover(function(){ $(this).addClass("title-on"); },function(){ $(this).removeClass("title-on"); }); $(".notice .tabch").each(function(i,n){ $(n).hover(function(){ $(".notice .tab-on").removeClass("tab-on"); $(n).addClass("tab-on"); $(".notice .tabchc").hide(); $($(".notice .tabchc")[i]).show(); },function(){ }) }); $(".prnm03-div span").each(function(i, n) { $(n).hover(function() { $(".prnm03-div .on").removeClass("on"); $(".prnm-03 .selected").removeClass("selected"); $($(".prnm-03 ul")[i]).addClass("selected"); $(n).addClass("on"); }, function() {}); }); $(".banner-new-meitong .mian_x_area .left-item").hover(function(){ $(".banner-new-meitong .mian_x_area .hover-item").removeClass("hover-item"); $(this).addClass("hover-item"); },function(){}); new FreeActivity({ End:$("#free-enddate"), DD:$("#free-day"), HH:$("#free-hour"), MM:$("#free-min"), SS:$("#free-sec") }).Start(); new FreeActivity({ End:$("#free-enddatei"), DD:$("#free-dayi"), HH:$("#free-houri"), MM:$("#free-mini"), SS:$("#free-seci") }).Start(); new FreeActivity({ End:$("#free-enddatea"), DD:$("#free-daya"), HH:$("#free-houra"), MM:$("#free-mina"), SS:$("#free-seca") }).Start(); new FreeActivity({ End:$("#free-enddatec"), DD:$("#free-dayc"), HH:$("#free-hourc"), MM:$("#free-minc"), SS:$("#free-secc") }).Start(); new FreeActivity({ End:$("#free-enddated"), DD:$("#free-dayd"), HH:$("#free-hourd"), MM:$("#free-mind"), SS:$("#free-secd") }).Start(); new FreeActivity({ End:$("#free-enddatee"), DD:$("#free-daye"), HH:$("#free-houre"), MM:$("#free-mine"), SS:$("#free-sece") }).Start(); var remarkHead, remarks; function RefreshRemark() { remarks = $('#reamrkList ul li[id!=remarkHead]'); if (remarks.size() > 5) { var lastItem = remarks.last(); lastItem.hide(); $('#remarkHead').after(lastItem); $(lastItem).show(400); } } $('.sina-concern').html("<iframe width=\"210\" height=\"110\" frameborder=\"0\" scrolling=\"no\" class=\"share_self\" src=\"http://widget.weibo.com/weiboshow/index.php?width=200&amp;height=110&amp;fansRow=2&amp;ptype=0&amp;speed=0&amp;skin=2&amp;isTitle=1&amp;noborder=1&amp;isWeibo=0&amp;isFans=0&amp;uid=1701618915&amp;verifier=f811d153\"></iframe>"); remarkHead = $('#remarkHead'); window.setInterval(RefreshRemark,5000); new TryOn(); new Cuxiao("templatePageCuxiao"); $("#bottom-friend-link").click(function(){ if(!$(".bottom .friend-link").data("_clickShow")) { $(".bottom .friend-link").data("_clickShow",true); $(".bottom .friend-link").slideDown("fast"); return; } $(".bottom .friend-link").data("_clickShow",false); $(".bottom .friend-link").slideUp("fast"); }); new ExchangeVoucherActivity("activityexchangescore"); } )
