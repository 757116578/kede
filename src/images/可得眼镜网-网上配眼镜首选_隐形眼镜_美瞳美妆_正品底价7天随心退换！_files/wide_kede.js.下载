$(window).ready(function () { $(window).scroll(function () { if ($(window).scrollTop() > 400) { $(".pf_left").fadeIn("slow"); $(".pf_right_6").fadeIn("slow"); } else { $(".pf_left").fadeOut("slow"); $(".pf_right_6").fadeOut("slow"); } }); $('a[href*=#],area[href*=#]').click(function () { if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) { var $target = $(this.hash); $target = $target.length && $target || $('[name=' + this.hash.slice(1) + ']'); if ($target.length) { var targetOffset = $target.offset().top - 30; $('html,body').animate({ scrollTop: targetOffset }, 600); return false; } } }); $(".menu_tab_phone").hover(function () { $(this).children(".menu_tab_phone_img").css("display", "block"); }, function () { $(this).children(".menu_tab_phone_img").css("display", "none"); }); $(".txt_search").focus(function () { $(this).css('color', '#000'); $(this).css('box-shadow', '0px 0px 3px rgba(255,153, 0, 0.5) inset'); }); $(".txt_search").blur(function () { $(this).css('color', '#a0a0a0'); $(this).css('box-shadow', 'none'); }); $(".wide_channel .wide_channel_category").hover(function () { $(this).children(".category_info").css("display", "block"); $(".category_info .list_item").hover(function () { $(this).children(".item_blank").css("display", "none"); $(this).children(".child_list").css("display", "block"); }, function () { $(this).children(".item_blank").css("display", "block"); $(this).children(".child_list").css("display", "none"); }); }, function () { if (window.location.pathname != "/" && window.location.pathname != "/index") { if (window.location.pathname != "/index.html") $(this).children(".category_info").css("display", "none"); } }); }); $(function category_info() { if (window.location.pathname == "/" || window.location.pathname == "/index.html"|| window.location.pathname == "/index") { $(".wide_channel .content .wide_channel_category").children(".category_info").css("display", "block"); } else { $(".wide_channel .content .wide_channel_category").children(".category_info").css("display", "none"); } }); function isLogin() { var result = false; var arr = document.cookie.split('; '); for (var i = 0; i < arr.length; i++) { var arr2 = arr[i].split('='); if (arr2[0] == "IsLogin") { if (arr2[1]) { result = true; return result; } } } return result; } function addFavorite(goodsId) { var $this = $("#" + goodsId); $.ajax({ type: 'post', dataType: 'json', url: '/cart/addfavorite', data: { 'goodsId': goodsId}, cache: false, success: function(json) { if (json.Valid) { $this.addClass("on"); $this.children("span").hide(); $this.children("label").show(); } else { if (json.Code == "-100") window.location.href = "/Account/Login"; else { if (json.Error.indexOf("已存在收藏夹中") != -1) { $this.addClass("on"); $this.children("span").hide(); $this.children("label").show(); } tip({ title: "提示", msg: json.Error, type: "alert" }); } } } }); } var Public = {}; Public.Common = { FunPlaceholder: function (str,left,top,index) { var list = str.split(','); for (var i = 0; i < list.length; i++) { var name = list[i]; var arry = new Array(); arry[0] = document.getElementById(name); if (arry[0] == null) { element = document.getElementsByName(name); if (element.length > 0) { arry = element; } else return; } for (var n = 0; n < arry.length; n++) { var element = arry[n]; var placeholder; if (element && !("placeholder" in document.createElement("input")) && (placeholder = element.getAttribute("placeholder"))) { var idLabel = element.id; if (!idLabel) { idLabel = "placeholder_" + i + "T" + n; element.id = idLabel; } var eleLabel = document.createElement("span"); eleLabel.htmlFor = idLabel; eleLabel.style.position = "absolute"; eleLabel.style.cursor = "text"; eleLabel.style.color = "#999"; eleLabel.style.zIndex = index || 1; eleLabel.style.left = left||"0px"; eleLabel.style.top = top || "0px"; eleLabel.style.display="inline"; eleLabel.style.width = "auto"; eleLabel.className = "placeholder"; eleLabel.style.backgroundImage = "none"; eleLabel.style.backgroundColor = "transparent"; eleLabel.style.fontSize = $(element).css("fontSize"); eleLabel.style.lineHeight = $(element).css("lineHeight"); element.parentNode.insertBefore(eleLabel, element); eleLabel.onclick = function () { this.innerHTML = ""; $(this).next("input").eq(0).focus(); }; element.onfocus = function () { $(this).prev("span")[0].innerHTML = ""; }; element.onblur = function () { if (this.value === "") { $(this).prev("span")[0].innerHTML = $(this)[0].getAttribute("placeholder"); } }; if (element.value === "") { eleLabel.innerHTML = placeholder; } }; } } } };
