function ToBankcomm() { $.post('/Account/GetLoginRedircetUrl', $.param({ type: "11" }), function(data) { if (data && data.Val) { location.href = data.Href; } else { tip({ title: '错误提示', type: 'alert', msg: data.Msg }); } }, 'json'); } function generateTopMenu() { $.ajax({ url: "/Template/TopMenu", type: "post", dataType: "html", success: function (html) { $("#headerTopMenu").replaceWith(html); $(".menu .menu_tab_bzzx").mouseover(function () { $(this).addClass("selected"); }).mouseout(function() { $(this).removeClass("selected"); }); } }); } function generateMemberStatus() { $.ajax({ url: "/Template/UserToolBar", type: "post", dataType: "json", success: function (json) { if (json.Valid) { var memberStatus; if (json.Data.IsMemberValid) { if (json.Data.IsOtherPartner) { memberStatus = "<div style='display:inline;height:20px;'><span><span class='tenpey_bar_logo'></span>您好：" + json.Data.DisplayName + "</span></div> &nbsp;[<a href='/account/logout'>退出</a>]"; } else { memberStatus = json.Data.DisplayName + "您好，欢迎来可得！[<a href='/account/logout'>退出</a>]"; } } else { memberStatus = "您好，欢迎光临" + json.Data.WebName + "！<a class='to-login' href='/account/login' target='_self'>登录</a><a href='/account/register' class='to-register' target='_self'>[免费注册]</a>"; } $("#userTooleBarMemberStatus").append(memberStatus); $("#headCouponQuantity").html(json.Data.AvailableCouponQuantity > 0 ? ("<span class='myLiQuan'>" + json.Data.AvailableCouponQuantity + "</span>张") : ""); $("#menu_tab_cart").html(json.Data.CartQuantity); $("#RightContactFloatContainerCartQuantity").html(json.Data.CartQuantity); } $("#favSideBar").attr("href", "javascript:aLinkAddToFav('http://www.kede.com/','" + json.Data.PageTitle + "')"); } }); } (function() { generateTopMenu(); generateMemberStatus(); })();
